(()=>{"use strict";class e{constructor(e,o,n){this.codiceUnivoco=e,this.scontoPrezzoListino=o,this.venditore=n}}function o(e,o){return new Promise(((n,t)=>{const r=e.transaction("Copie","readwrite").objectStore("Copie").add(o);r.onsuccess=()=>{n(!0)},r.onerror=()=>{"ConstraintError"===r.error.name?n(!1):t(r.error)}}))}document.addEventListener("DOMContentLoaded",(()=>{return n=void 0,t=void 0,c=function*(){try{const n=yield new Promise(((e,o)=>{const n=indexedDB.open("Database",1);n.onerror=()=>{o(n.onerror)},n.onsuccess=()=>{const o=n.result;e(o)},n.onupgradeneeded=()=>{const e=n.result;if(!e.objectStoreNames.contains("Copie")){const o=e.createObjectStore("Copie",{keyPath:"codiceUnivoco"});o.createIndex("prezzoScontato","prezzoScontato",{unique:!1}),o.createIndex("venditore","venditore",{unique:!1})}}}));let t;console.log("Database aperto:",n.name);for(let r=0;r<10;r++)t=new e(r,r+20,r+"ciao"),o(n,t).then((e=>{e?console.log("Nuova copia aggiunta!"):console.log("Copia giÃ  esistente, non aggiunta")})).catch((e=>{console.error("Errore durante il salvataggio:",e)}))}catch(e){console.error("Errore apertura DB:",e)}},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{s(c.next(e))}catch(e){o(e)}}function i(e){try{s(c.throw(e))}catch(e){o(e)}}function s(o){var n;o.done?e(o.value):(n=o.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,i)}s((c=c.apply(n,t||[])).next())}));var n,t,r,c}))})();